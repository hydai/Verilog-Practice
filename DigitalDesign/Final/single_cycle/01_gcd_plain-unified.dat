// GCD (greatest common divisor) Program
//      Addresses #1024, #1025 are the two integer parameters
//      GCD result is in #1026
//      Registers:
//        R2: the first integer of GCD
//        R3: the second integer of GCD
//        R1: temporal variable for checking branch condition
//        R16: storing the constant #1024
//        R17: storing the constant #1025
//        R18: storing the constant #1026

// Code Segment starts at 0
@0
0100010_10000_00000__000010000000000  //   main:  ADI  R16, R0, #1024
0010000_00010_10000__000000000000000  //          LD   R2, M[R16]
0100010_10001_00000__000010000000001  //          ADI  R17, R0, #1025
0010000_00011_10001__000000000000000  //          LD   R3, M[R17]
0000101_00001_00010_00011_0000000000  //   gcd:   SUB  R1, R2, R3
1100000_00000_00001__000000000000110  //          BZ   R1, done (+6)
1100101_00001_00010_00011_0000000000  //          SLT  R1, R2, R3
1001000_00000_00001__000000000000010  //          BNZ  R1, less (+2)
0000101_00010_00010_00011_0000000000  //          SUB  R2, R2, R3
1101000_00000_00000__111111111111010  //          JMP  gcd (-6)
0000101_00011_00011_00010_0000000000  //   less:  SUB  R3, R3, R2
1101000_00000_00000__111111111111000  //          JMP  gcd (-8)
0100010_10010_00000__000010000000010  //   done:  ADI  R18, R0, #1026
0100000_00000_10010_00010_0000000000  //          ST   M[R18], R2

0000000_00000_00000__000000000000000  //          NOP
0000000_00000_00000__000000000000000  //          NOP
0000000_00000_00000__000000000000000  //          NOP
0000000_00000_00000__000000000000000  //          NOP
0000000_00000_00000__000000000000000  //          NOP
0000000_00000_00000__000000000000000  //          NOP
0000000_00000_00000__000000000000000  //          NOP
0000000_00000_00000__000000000000000  //          NOP
0000000_00000_00000__000000000000000  //          NOP
0000000_00000_00000__000000000000000  //          NOP


// You need to define the data segment when using unified I/D memory
// Data Segment starts at 1024 = 0x400h
@400
00000000_00000000_00000000_00011011   //  27
00000000_00000000_00000000_00001100   //  12

0000000_00000_00000__000000000000000  //
0000000_00000_00000__000000000000000  //
