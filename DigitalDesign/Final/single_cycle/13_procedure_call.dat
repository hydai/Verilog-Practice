// A Simple Test for Procedure Call
//
// Note: This version is only for your reference.  It may not be
// verified completely.  Please report any bug you find out.

@0
0100010_10000_00000__000010000000000  //main:     ADI  R16, R0, #1024
0010000_00001_10000__000000000000000  //          LD   R1, M[R16]
0100101_00010_00001__000000000000001  //          SBI  R2, R1, #1
1100000_00000_00010__000000000001011  //          BZ   R2, 1! (+11)
0100010_00111_00001__000000000000000  //          ADI  R7, R1, #0
0100010_01000_00010__000000000000000  //          ADI  R8, R2, #0
1101000_00000_00000__000000000000100  //          JMP  mul (+4)
0100101_00010_00010__000000000000001  //   rec:   SBI  R2, R2, #1
0100010_00111_01111__000000000000000  //          ADI  R7, R15, #0
0100010_01111_00000__000000000000000  //          ADI  R15,R0, #0
0100010_01000_00010__000000000000000  //          ADI  R8, R2, #0
0000010_01111_01111_00111_0000000000  //   mul:   ADD  R15, R15, R7
0100101_01000_01000__000000000000001  //          SBI  R8, R8, #1
1001000_00000_01000__111111111111101  //          BNZ  R8, mul (-3)
0100101_00001_00010__000000000000010  // R2==2:   SBI  R1, R2, #2
1100000_00000_00001__000000000000010  //          BZ   R1, done (+2)
1101000_00000_00000__111111111110110  //          JMP  rec (-10)
0100010_01111_00000__000000000000001  //    1!:   ADI  R15, R0, #1
0100010_10010_00000__000010000000010  //   done:  ADI  R18, R0, #1026
0100000_00000_10010_01111_0000000000  //          ST   M[R18], R15
1000000_00001_01111_00000_0000000000  //          MOVA R1, R15
0001011_00010_00000_00000_0000000000  //          NOT  R2, R0
0110000_00001_00000__000000000000001  //          JML  R1, (+1)
0001100_01111_00000_00010_0000000000  //          MOVB R15, R2
0100010_00010_00000__000000000000000  //          ADI  R2, R0, #0
1110000_00000_00001__000000000000000  //          JMR  R1


@400
00000000_00000000_00000000_00000110   // 6

@600
0000000_00000_00000__000000000000000  // NOP for branch_prediction feature  to flush the IR register
